(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26cddf4a"],{"0366":function(e,t,o){var n=o("1c0b");e.exports=function(e,t,o){if(n(e),void 0===t)return e;switch(o){case 0:return function(){return e.call(t)};case 1:return function(o){return e.call(t,o)};case 2:return function(o,n){return e.call(t,o,n)};case 3:return function(o,n,r){return e.call(t,o,n,r)}}return function(){return e.apply(t,arguments)}}},"159b":function(e,t,o){var n=o("da84"),r=o("fdbc"),s=o("17c2"),a=o("9112");for(var l in r){var i=n[l],c=i&&i.prototype;if(c&&c.forEach!==s)try{a(c,"forEach",s)}catch(u){c.forEach=s}}},"17c2":function(e,t,o){"use strict";var n=o("b727").forEach,r=o("a640"),s=o("ae40"),a=r("forEach"),l=s("forEach");e.exports=a&&l?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},"1dde":function(e,t,o){var n=o("d039"),r=o("b622"),s=o("2d00"),a=r("species");e.exports=function(e){return s>=51||!n((function(){var t=[],o=t.constructor={};return o[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},2839:function(e,t,o){"use strict";var n=o("6d09"),r=o.n(n);r.a},"2d00":function(e,t,o){var n,r,s=o("da84"),a=o("342f"),l=s.process,i=l&&l.versions,c=i&&i.v8;c?(n=c.split("."),r=n[0]+n[1]):a&&(n=a.match(/Edge\/(\d+)/),(!n||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/),n&&(r=n[1]))),e.exports=r&&+r},"342f":function(e,t,o){var n=o("d066");e.exports=n("navigator","userAgent")||""},4160:function(e,t,o){"use strict";var n=o("23e7"),r=o("17c2");n({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},"65f0":function(e,t,o){var n=o("861d"),r=o("e8b5"),s=o("b622"),a=s("species");e.exports=function(e,t){var o;return r(e)&&(o=e.constructor,"function"!=typeof o||o!==Array&&!r(o.prototype)?n(o)&&(o=o[a],null===o&&(o=void 0)):o=void 0),new(void 0===o?Array:o)(0===t?0:t)}},"6d09":function(e,t,o){},8418:function(e,t,o){"use strict";var n=o("c04e"),r=o("9bf2"),s=o("5c6c");e.exports=function(e,t,o){var a=n(t);a in e?r.f(e,a,s(0,o)):e[a]=o}},a434:function(e,t,o){"use strict";var n=o("23e7"),r=o("23cb"),s=o("a691"),a=o("50c4"),l=o("7b0b"),i=o("65f0"),c=o("8418"),u=o("1dde"),d=o("ae40"),f=u("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,h=Math.min,g=9007199254740991,w="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!f||!m},{splice:function(e,t){var o,n,u,d,f,m,v=l(this),b=a(v.length),k=r(e,b),y=arguments.length;if(0===y?o=n=0:1===y?(o=0,n=b-k):(o=y-2,n=h(p(s(t),0),b-k)),b+o-n>g)throw TypeError(w);for(u=i(v,n),d=0;d<n;d++)f=k+d,f in v&&c(u,d,v[f]);if(u.length=n,o<n){for(d=k;d<b-n;d++)f=d+n,m=d+o,f in v?v[m]=v[f]:delete v[m];for(d=b;d>b-n+o;d--)delete v[d-1]}else if(o>n)for(d=b-n;d>k;d--)f=d+n-1,m=d+o-1,f in v?v[m]=v[f]:delete v[m];for(d=0;d<o;d++)v[d+k]=arguments[d+2];return v.length=b-n+o,u}})},b727:function(e,t,o){var n=o("0366"),r=o("44ad"),s=o("7b0b"),a=o("50c4"),l=o("65f0"),i=[].push,c=function(e){var t=1==e,o=2==e,c=3==e,u=4==e,d=6==e,f=5==e||d;return function(m,p,h,g){for(var w,v,b=s(m),k=r(b),y=n(p,h,3),x=a(k.length),N=0,F=g||l,S=t?F(m,x):o?F(m,0):void 0;x>N;N++)if((f||N in k)&&(w=k[N],v=y(w,N,b),e))if(t)S[N]=v;else if(v)switch(e){case 3:return!0;case 5:return w;case 6:return N;case 2:i.call(S,w)}else if(u)return!1;return d?-1:c||u?u:S}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},c425:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"AddGoods"},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:14}},[o("div",[o("el-card",{attrs:{"body-style":{padding:"0px"}}},[o("el-row",[o("div",{staticStyle:{padding:"5px","text-align":"center"}},[o("el-form",{ref:"ruleForm",attrs:{inline:!0,model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"桌号：",prop:"deskNo"}},[o("el-select",{attrs:{clearable:""},model:{value:e.ruleForm.deskNo,callback:function(t){e.$set(e.ruleForm,"deskNo",t)},expression:"ruleForm.deskNo"}},e._l(e.allDeskData,(function(e){return o("el-option",{key:e.id,attrs:{value:e.deskCode,label:e.deskName}})})),1)],1),o("el-form-item",{attrs:{label:"会员手机号：",prop:"phoneNumber"}},[o("el-input",{attrs:{maxlength:"11",placeholder:"请输入会员手机号",disabled:e.custInput},on:{change:e.checkCustomer},model:{value:e.ruleForm.phoneNumber,callback:function(t){e.$set(e.ruleForm,"phoneNumber","string"===typeof t?t.trim():t)},expression:"ruleForm.phoneNumber"}})],1)],1)],1)]),o("el-row",{staticStyle:{margin:"10px","line-height":"40px"}},[o("span",[e._v("总金额: ￥"+e._s(parseFloat(e.totalMoney).toFixed(2)))]),o("span",{staticStyle:{float:"right","margin-right":"20px"}},[o("span",{staticStyle:{"padding-right":"30px",color:"red","font-weight":"800"}},[e._v(e._s(e.custName))]),o("el-button",{attrs:{type:"danger",size:"medium"},on:{click:e.delAllSelected}},[e._v("清空")]),o("el-button",{attrs:{type:"warning",size:"medium"},on:{click:e.toWaitOrder}},[e._v("挂单")]),o("el-button",{attrs:{type:"success",size:"medium"},on:{click:e.finishOrder}},[e._v("结账")])],1)])],1),o("el-table",{ref:"clickTable",staticStyle:{width:"100%","max-height":"500px"},attrs:{data:e.selectedGoods,border:""}},[o("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center"}}),o("el-table-column",{attrs:{prop:"goodsName",label:"商品名称","show-overflow-tooltip":!0,align:"center"}}),o("el-table-column",{attrs:{label:"单价",width:"100",prop:"price",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.price?parseFloat(t.row.price).toFixed(2):(0).toFixed(2)))])]}}])}),o("el-table-column",{attrs:{label:"数量",prop:"num",width:"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input-number",{attrs:{min:1,max:999999},on:{change:function(o){e.numChange(o,t)}},model:{value:t.row.num,callback:function(o){e.$set(t.row,"num",o)},expression:"scope.row.num"}})]}}])}),o("el-table-column",{attrs:{label:"金额",prop:"money",align:"center",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.money?parseFloat(t.row.money).toFixed(2):(0).toFixed(2)))])]}}])}),o("el-table-column",{attrs:{label:"操作",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(o){return e.delGoods(t)}}},[e._v("删除")])]}}])})],1)],1)]),o("el-col",{attrs:{span:10}},[o("el-row",{staticStyle:{"margin-bottom":"10px"}},[o("span",{staticStyle:{"font-size":"16px"}},[e._v("常用菜单")])]),o("el-row",e._l(e.allGoodsData,(function(t){return o("el-col",{key:t.id,attrs:{span:7,offset:1}},[o("el-card",{staticClass:"card_class",attrs:{shadow:"hover"}},[o("div",{staticStyle:{padding:"5px","text-align":"center"},on:{click:function(o){return e.goodsClick(t)}}},[o("span",[e._v(e._s(t.goodsName))]),o("span",{staticStyle:{color:"#409eff"}},[e._v("￥"+e._s(parseFloat(t.price).toFixed(2)))]),o("div",{staticClass:"bottom clearfix"},[o("time",{staticClass:"huiyuan"},[e._v("会员价￥"+e._s(parseFloat(t.disPrice).toFixed(2)))])])])])],1)})),1)],1)],1)],1)},r=[],s=(o("4160"),o("a434"),o("b680"),o("159b"),{name:"AddGoods",data:function(){var e=function(e,t,o){null==t||""==t?o():/^1(3|4|5|6|7|8|9)\d{9}$/.test(t)?o():o(new Error("请输入正确的11位电话号码！"))};return{totalMoney:0,allDeskData:[],allGoodsData:[],selectedGoods:[],custInput:!1,custName:null,custPhone:null,dkId:null,dkName:null,ruleForm:{phoneNumber:null,deskNo:null},rules:{phoneNumber:[{validator:e,trigger:["blur"]}]}}},mounted:function(){this.getAllGoodsList(),this.getAllDeskList()},watch:{"ruleForm.deskNo":function(e){var t=this;if(0!=t.allDeskData.length)return null==e||""==e?(t.dkId=null,void(t.dkName=null)):void t.allDeskData.forEach((function(o){if(o.deskCode==e)return t.dkId=o.id,void(t.dkName=o.deskName)}))},selectedGoods:function(e){var t=this;e.length>0?t.custInput=!0:t.custInput=!1,t.sumMoney()}},methods:{checkCustomer:function(e){var t=this;if(!e)return t.custName=null,void(t.custPhone=null);t.$refs["ruleForm"].validate((function(o){if(!o)return t.custName=null,t.custPhone=null,!1;t.axios.get(window.sHost+window.sUrl.shop.getCustomerByPhone+"?phone="+e).then((function(e){e.data.success?(t.custName="会员："+e.data.obj.userName,t.custPhone=e.data.obj.phone):(t.custName=null,t.custPhone=null,window.master.fErrorMes(e.data.msg))})).catch((function(){}))}))},getAllGoodsList:function(){var e=this;e.axios({method:"get",url:window.sHost+window.sUrl.shop.getAllGoodsList}).then((function(t){var o=t.data;o.success?e.allGoodsData=o.obj:window.master.fErrorMes(o.msg)}))},getAllDeskList:function(){var e=this;e.axios({method:"get",url:window.sHost+window.sUrl.shop.getUseableDeskList}).then((function(t){var o=t.data;o.success?e.allDeskData=o.obj:window.master.fErrorMes(o.msg)}))},goodsClick:function(e){var t={};t.id=e.id,t.goodsCode=e.goodsCode,t.goodsName=e.goodsName,t.num=1,t.unit=e.unit,null!=this.custPhone?(t.price=e.disPrice,t.money=e.disPrice):(t.price=e.price,t.money=e.price),this.selectedGoods.push(t)},delGoods:function(e){this.selectedGoods.splice(e.$index,1)},numChange:function(e,t){this.selectedGoods[t.$index].money=parseFloat(t.row.price*e).toFixed(2),this.sumMoney()},sumMoney:function(){var e=this;e.totalMoney=0,this.selectedGoods.forEach((function(t){e.totalMoney=(parseFloat(e.totalMoney)+parseFloat(t.price*t.num)).toFixed(2)}))},delAllSelected:function(){var e=this;0!==e.selectedGoods.length&&this.$confirm("确定清空所有商品?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0,closeOnPressEscape:!1,closeOnClickModal:!1}).then((function(){e.selectedGoods=[]}),(function(){}))},finishOrder:function(){var e=this;0===e.selectedGoods.length?window.master.fWarningMes("没有任何商品，无需结账！"):this.$confirm("确定结账?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0,closeOnPressEscape:!1,closeOnClickModal:!1}).then((function(){window.master.fLoadingOpen(),e.axios({method:"post",url:window.sHost+window.sUrl.shop.saveOrderReportBatch,data:e.selectedGoods}).then((function(t){window.master.fLoadingClose();var o=t.data;o.success?(e.ruleForm.deskNo=null,e.ruleForm.phoneNumber=null,e.custName=null,e.custPhone=null,e.selectedGoods=[],window.master.fSuccessMes(o.msg)):window.master.fErrorMes(o.msg)}))}),(function(){}))},toWaitOrder:function(){var e=this;0!==e.selectedGoods.length&&(e.ruleForm.deskNo?(e.$refs["ruleForm"].model.itemList=e.selectedGoods,e.$refs["ruleForm"].model.deskCode=e.ruleForm.deskNo,e.$refs["ruleForm"].model.deskId=e.dkId,e.$refs["ruleForm"].model.deskName=e.dkName,e.$confirm("确定挂单【"+e.dkName+"】?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0,closeOnPressEscape:!1,closeOnClickModal:!1}).then((function(){window.master.fLoadingOpen(),e.axios({method:"post",url:window.sHost+window.sUrl.shop.saveOrder,data:e.$refs["ruleForm"].model}).then((function(t){window.master.fLoadingClose();var o=t.data;o.success?(e.ruleForm.deskNo=null,e.ruleForm.phoneNumber=null,e.custName=null,e.custPhone=null,e.selectedGoods=[],window.master.fSuccessMes(o.msg)):window.master.fErrorMes(o.msg)}))}),(function(){window.master.fLoadingClose()}))):window.master.fErrorMes("请选择桌号"))}}}),a=s,l=(o("2839"),o("2877")),i=Object(l["a"])(a,n,r,!1,null,null,null);t["default"]=i.exports},e8b5:function(e,t,o){var n=o("c6b6");e.exports=Array.isArray||function(e){return"Array"==n(e)}},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
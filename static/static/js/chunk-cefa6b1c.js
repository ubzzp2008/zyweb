(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cefa6b1c"],{"0366":function(e,t,r){var o=r("1c0b");e.exports=function(e,t,r){if(o(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,o){return e.call(t,r,o)};case 3:return function(r,o,a){return e.call(t,r,o,a)}}return function(){return e.apply(t,arguments)}}},"159b":function(e,t,r){var o=r("da84"),a=r("fdbc"),i=r("17c2"),s=r("9112");for(var l in a){var n=o[l],c=n&&n.prototype;if(c&&c.forEach!==i)try{s(c,"forEach",i)}catch(u){c.forEach=i}}},"17c2":function(e,t,r){"use strict";var o=r("b727").forEach,a=r("a640"),i=r("ae40"),s=a("forEach"),l=i("forEach");e.exports=s&&l?[].forEach:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}},4160:function(e,t,r){"use strict";var o=r("23e7"),a=r("17c2");o({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},4848:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"Customer"},[r("el-row",[r("el-row",[r("el-form",{attrs:{inline:!0,model:e.oUserList}},[r("el-form-item",{attrs:{label:"会员姓名"}},[r("el-input",{attrs:{placeholder:"",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.fGetUserList(t)}},model:{value:e.oUserList.userName,callback:function(t){e.$set(e.oUserList,"userName","string"===typeof t?t.trim():t)},expression:"oUserList.userName"}})],1),r("el-form-item",{attrs:{label:"联系电话"}},[r("el-input",{attrs:{placeholder:"",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.fGetUserList(t)}},model:{value:e.oUserList.phone,callback:function(t){e.$set(e.oUserList,"phone","string"===typeof t?t.trim():t)},expression:"oUserList.phone"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.fGetUserList}},[e._v("查询")])],1)],1)],1),r("el-row",{staticStyle:{"margin-bottom":"5px"}},[r("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",size:"small"},on:{click:e.add}},[e._v("新增")]),r("el-button",{staticStyle:{float:"left"},attrs:{type:"warning",size:"small"},on:{click:e.edit}},[e._v("编辑")]),r("el-button",{staticStyle:{float:"left"},attrs:{type:"danger",size:"small"},on:{click:e.deletes}},[e._v("删除")])],1),r("el-table",{ref:"clickTable",staticStyle:{width:"100%"},attrs:{data:e.customerList,border:"","max-height":"560"},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),r("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center"}}),r("el-table-column",{attrs:{prop:"userName",label:"会员姓名","show-overflow-tooltip":!0,align:"center"}}),r("el-table-column",{attrs:{prop:"phone",label:"手机号","show-overflow-tooltip":!0,align:"center"}}),r("el-table-column",{attrs:{prop:"sex",label:"性别",formatter:e.formatter,align:"center","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{prop:"birthday",label:"生日",align:"center","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{prop:"addDate",label:"创建日期",align:"center","show-overflow-tooltip":!0}})],1),r("el-pagination",{attrs:{"page-sizes":[20,30,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"新增会员",visible:e.addVisible,width:"60%",top:"5vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.addVisible=t},close:function(t){return e.cancelModal("ruleForm")}}},[r("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"会员姓名:",prop:"userName"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm.userName,callback:function(t){e.$set(e.ruleForm,"userName",t)},expression:"ruleForm.userName"}})],1),r("el-form-item",{attrs:{label:"手机号:",prop:"phone"}},[r("el-input",{attrs:{maxlength:"11",autocomplete:"off"},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1),r("el-form-item",{attrs:{label:"性别:",prop:"sex"}},[r("el-radio-group",{model:{value:e.ruleForm.sex,callback:function(t){e.$set(e.ruleForm,"sex",t)},expression:"ruleForm.sex"}},[r("el-radio",{attrs:{label:"1"}},[e._v("先生")]),r("el-radio",{attrs:{label:"0"}},[e._v("女士")])],1)],1),r("el-form-item",{attrs:{label:"出生日期:",prop:"birthday"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"date"},model:{value:e.ruleForm.birthday,callback:function(t){e.$set(e.ruleForm,"birthday",t)},expression:"ruleForm.birthday"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:function(t){return e.cancelModal("ruleForm")}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1),r("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"编辑",visible:e.editVisible,width:"60%",top:"5vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.editVisible=t},close:function(t){return e.cancelModal("editForm")}}},[r("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.rules,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"会员姓名:"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.userName,callback:function(t){e.$set(e.editForm,"userName",t)},expression:"editForm.userName"}})],1),r("el-form-item",{attrs:{label:"手机号:"}},[r("el-input",{attrs:{maxlength:"11",autocomplete:"off"},model:{value:e.editForm.phone,callback:function(t){e.$set(e.editForm,"phone",t)},expression:"editForm.phone"}})],1),r("el-form-item",{attrs:{label:"sex:",prop:"realName"}},[r("el-radio-group",{model:{value:e.editForm.sex,callback:function(t){e.$set(e.editForm,"sex",t)},expression:"editForm.sex"}},[r("el-radio",{attrs:{label:"1"}},[e._v("先生")]),r("el-radio",{attrs:{label:"0"}},[e._v("女士")])],1)],1),r("el-form-item",{attrs:{label:"生日:",prop:"birthday"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd"},model:{value:e.editForm.birthday,callback:function(t){e.$set(e.editForm,"birthday",t)},expression:"editForm.birthday"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:function(t){return e.cancelModal("editForm")}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.fEditsubmit("editForm")}}},[e._v("确 定")])],1)],1)],1)},a=[],i=(r("4160"),r("159b"),{name:"Customer",data:function(){var e=this,t=function(t,r,o){e.axios.get(window.sHost+window.sUrl.shop.checkPhoneExist+"?phone="+r).then((function(e){e.data.success?o():o(new Error(e.data.msg))})).catch()},r=function(e,t,r){null==t||""==t?r():/^1(3|4|5|6|7|8|9)\d{9}$/.test(t)?r():r(new Error("请输入正确的11位电话号码！"))};return{customerList:[],pageNum:1,pageSize:20,total:null,addVisible:!1,editVisible:!1,editForm:{},oUserList:{userName:null,realName:null},ruleForm:{userName:null,phone:null,sex:"1",birthday:null},rules:{userName:[{required:!0,message:"请输入会员姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:r,trigger:["blur"]},{validator:t,trigger:["blur"]}]},selectRow:[]}},mounted:function(){this.initTable()},watch:{allSelect:function(e){var t=this;this.selectRow=[],e.length>0&&e.forEach((function(e){t.selectRow.push(e.id)}))}},methods:{formatter:function(e){return"0"===e.sex?"女":"1"===e.sex?"男":""},submitForm:function(e){var t=this;t.$refs[e].validate((function(r){if(!r)return!1;window.master.fLoadingOpen(),t.axios.post(window.sHost+window.sUrl.shop.saveCustomer,JSON.parse(JSON.stringify(t.$refs[e].model))).then((function(r){window.master.fLoadingClose(),r.data.success?(window.master.fSuccessMes(r.data.msg),t.addVisible=!1,t.initTable(),t.$refs[e].resetFields()):window.master.fErrorMes(r.data.msg)})).catch((function(){window.master.fLoadingClose()}))}))},fEditsubmit:function(e){var t=this;t.$refs[e].validate((function(r){if(!r)return!1;window.master.fLoadingOpen(),t.axios.post(window.sHost+window.sUrl.shop.updateCustomer,JSON.parse(JSON.stringify(t.$refs[e].model))).then((function(r){window.master.fLoadingClose(),r.data.success?(window.master.fSuccessMes(r.data.msg),t.editVisible=!1,t.initTable(),t.$refs[e].resetFields()):window.master.fErrorMes(r.data.msg)})).catch((function(){window.master.fLoadingClose()}))}))},cancelModal:function(e){this.addVisible=!1,this.editVisible=!1,this.$refs[e].resetFields()},fGetUserList:function(){var e=this;window.master.fLoadingOpen(),this.axios.post(window.sHost+window.sUrl.shop.queryCustomerList,{pageNum:e.pageNum,pageSize:e.pageSize,userName:window.master.strReplace(e.oUserList.userName),phone:window.master.strReplace(e.oUserList.phone)}).then((function(t){window.master.fLoadingClose(),t.data.success?(e.customerList=t.data.obj.list,e.total=t.data.obj.total):window.master.fErrorMes(t.data.msg)})).catch((function(){window.master.fLoadingClose()}))},initTable:function(){var e=this;e.fGetUserList()},handleSizeChange:function(e){var t=this;t.pageSize=e,t.fGetUserList()},handleCurrentChange:function(e){var t=this;t.pageNum=e,t.fGetUserList()},handleSelectionChange:function(e){this.allSelect=e},add:function(){this.addVisible=!0},edit:function(){var e=this;void 0===e.allSelect||e.allSelect.length<1||e.allSelect.length>1?window.master.fWarningMes(this.$store.state.sOnlySelectOneMes):e.axios.get(window.sHost+window.sUrl.shop.getCustomerById+"?id="+e.allSelect[0].id).then((function(t){e.editForm=t.data.obj,e.editVisible=!0})).catch()},deletes:function(){var e=this;void 0===e.allSelect||e.allSelect.length<1||e.allSelect.length>1?window.master.fWarningMes(this.$store.state.sOnlySelectOneMes):e.$confirm("确定删除该会员?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0,closeOnPressEscape:!1,closeOnClickModal:!1}).then((function(){window.master.fLoadingOpen(),e.axios.post(window.sHost+window.sUrl.shop.deleteCustomer,"id="+e.allSelect[0].id).then((function(t){window.master.fLoadingClose(),t.data.success?(e.initTable(),window.master.fSuccessMes(t.data.msg)):window.master.fErrorMes(t.data.msg)})).catch()}),(function(){}))}}}),s=i,l=r("2877"),n=Object(l["a"])(s,o,a,!1,null,null,null);t["default"]=n.exports},"65f0":function(e,t,r){var o=r("861d"),a=r("e8b5"),i=r("b622"),s=i("species");e.exports=function(e,t){var r;return a(e)&&(r=e.constructor,"function"!=typeof r||r!==Array&&!a(r.prototype)?o(r)&&(r=r[s],null===r&&(r=void 0)):r=void 0),new(void 0===r?Array:r)(0===t?0:t)}},b727:function(e,t,r){var o=r("0366"),a=r("44ad"),i=r("7b0b"),s=r("50c4"),l=r("65f0"),n=[].push,c=function(e){var t=1==e,r=2==e,c=3==e,u=4==e,d=6==e,m=5==e||d;return function(f,p,h,b){for(var w,g,v=i(f),y=a(v),L=o(p,h,3),S=s(y.length),x=0,F=b||l,k=t?F(f,S):r?F(f,0):void 0;S>x;x++)if((m||x in y)&&(w=y[x],g=L(w,x,v),e))if(t)k[x]=g;else if(g)switch(e){case 3:return!0;case 5:return w;case 6:return x;case 2:n.call(k,w)}else if(u)return!1;return d?-1:c||u?u:k}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},e8b5:function(e,t,r){var o=r("c6b6");e.exports=Array.isArray||function(e){return"Array"==o(e)}},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
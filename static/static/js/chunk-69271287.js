(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69271287"],{"0366":function(e,t,o){var r=o("1c0b");e.exports=function(e,t,o){if(r(e),void 0===t)return e;switch(o){case 0:return function(){return e.call(t)};case 1:return function(o){return e.call(t,o)};case 2:return function(o,r){return e.call(t,o,r)};case 3:return function(o,r,i){return e.call(t,o,r,i)}}return function(){return e.apply(t,arguments)}}},"159b":function(e,t,o){var r=o("da84"),i=o("fdbc"),s=o("17c2"),l=o("9112");for(var a in i){var n=r[a],c=n&&n.prototype;if(c&&c.forEach!==s)try{l(c,"forEach",s)}catch(d){c.forEach=s}}},"17c2":function(e,t,o){"use strict";var r=o("b727").forEach,i=o("a640"),s=o("ae40"),l=i("forEach"),a=s("forEach");e.exports=l&&a?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},4160:function(e,t,o){"use strict";var r=o("23e7"),i=o("17c2");r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"65f0":function(e,t,o){var r=o("861d"),i=o("e8b5"),s=o("b622"),l=s("species");e.exports=function(e,t){var o;return i(e)&&(o=e.constructor,"function"!=typeof o||o!==Array&&!i(o.prototype)?r(o)&&(o=o[l],null===o&&(o=void 0)):o=void 0),new(void 0===o?Array:o)(0===t?0:t)}},b727:function(e,t,o){var r=o("0366"),i=o("44ad"),s=o("7b0b"),l=o("50c4"),a=o("65f0"),n=[].push,c=function(e){var t=1==e,o=2==e,c=3==e,d=4==e,u=6==e,m=5==e||u;return function(f,p,g,b){for(var h,w,v=s(f),F=i(v),y=r(p,g,3),S=l(F.length),L=0,x=b||a,k=t?x(f,S):o?x(f,0):void 0;S>L;L++)if((m||L in F)&&(h=F[L],w=y(h,L,v),e))if(t)k[L]=w;else if(w)switch(e){case 3:return!0;case 5:return h;case 6:return L;case 2:n.call(k,h)}else if(d)return!1;return u?-1:c||d?d:k}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},d2d3:function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"GoodsList"},[o("el-row",[o("el-row",[o("el-form",{attrs:{inline:!0,model:e.searchObj}},[o("el-form-item",{attrs:{label:"商品编码"}},[o("el-input",{attrs:{placeholder:"",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.fGetGoodsList(t)}},model:{value:e.searchObj.goodsCode,callback:function(t){e.$set(e.searchObj,"goodsCode","string"===typeof t?t.trim():t)},expression:"searchObj.goodsCode"}})],1),o("el-form-item",{attrs:{label:"商品名称"}},[o("el-input",{attrs:{placeholder:"",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.fGetGoodsList(t)}},model:{value:e.searchObj.goodsName,callback:function(t){e.$set(e.searchObj,"goodsName","string"===typeof t?t.trim():t)},expression:"searchObj.goodsName"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.fGetGoodsList}},[e._v("查询")])],1)],1)],1),o("el-row",{staticStyle:{"margin-bottom":"5px"}},[o("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",size:"small"},on:{click:e.addGoods}},[e._v("新增")]),o("el-button",{staticStyle:{float:"left"},attrs:{type:"warning",size:"small"},on:{click:e.editGoods}},[e._v("编辑")]),o("el-button",{staticStyle:{float:"left"},attrs:{type:"danger",size:"small"},on:{click:e.delGoods}},[e._v("删除")])],1),o("el-table",{ref:"clickTable",staticStyle:{width:"100%"},attrs:{data:e.goodsList,border:"","max-height":"560"},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),o("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center"}}),o("el-table-column",{attrs:{prop:"goodsCode",label:"商品编码","show-overflow-tooltip":!0,align:"center"}}),o("el-table-column",{attrs:{prop:"goodsName",label:"商品名称","show-overflow-tooltip":!0,align:"center"}}),o("el-table-column",{attrs:{prop:"unit",label:"单位",align:"center","show-overflow-tooltip":!0}}),o("el-table-column",{attrs:{prop:"price",label:"单价(元)",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.price?parseFloat(t.row.price).toFixed(2):(0).toFixed(2)))])]}}])}),o("el-table-column",{attrs:{prop:"disPrice",label:"会员价(元)",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.disPrice?parseFloat(t.row.disPrice).toFixed(2):(0).toFixed(2)))])]}}])}),o("el-table-column",{attrs:{prop:"sortnum",label:"排序号",align:"center"}})],1),o("el-pagination",{attrs:{"page-sizes":[20,30,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),o("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"新增商品",visible:e.addVisible,width:"60%",top:"5vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.addVisible=t},close:function(t){return e.cancelModal("ruleForm")}}},[o("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"商品编码:",prop:"goodsCode"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm.goodsCode,callback:function(t){e.$set(e.ruleForm,"goodsCode",t)},expression:"ruleForm.goodsCode"}})],1),o("el-form-item",{attrs:{label:"商品名称:",prop:"goodsName"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm.goodsName,callback:function(t){e.$set(e.ruleForm,"goodsName",t)},expression:"ruleForm.goodsName"}})],1),o("el-form-item",{attrs:{label:"单位:",prop:"unit"}},[o("el-select",{attrs:{clearable:""},model:{value:e.ruleForm.unit,callback:function(t){e.$set(e.ruleForm,"unit",t)},expression:"ruleForm.unit"}},e._l(e.unitEnum,(function(e){return o("el-option",{key:e.code,attrs:{value:e.code,label:e.name}})})),1)],1),o("el-form-item",{attrs:{label:"单价:",prop:"price"}},[o("el-input-number",{attrs:{precision:2,step:.1,min:0,max:99999},model:{value:e.ruleForm.price,callback:function(t){e.$set(e.ruleForm,"price",t)},expression:"ruleForm.price"}})],1),o("el-form-item",{attrs:{label:"会员价:",prop:"disPrice"}},[o("el-input-number",{attrs:{precision:2,step:.1,min:0,max:99999},model:{value:e.ruleForm.disPrice,callback:function(t){e.$set(e.ruleForm,"disPrice",t)},expression:"ruleForm.disPrice"}})],1),o("el-form-item",{attrs:{label:"排序号:",prop:"sortnum"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm.sortnum,callback:function(t){e.$set(e.ruleForm,"sortnum",e._n(t))},expression:"ruleForm.sortnum"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:function(t){return e.cancelModal("ruleForm")}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1),o("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"编辑商品",visible:e.editVisible,width:"60%",top:"5vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.editVisible=t},close:function(t){return e.cancelModal("editForm")}}},[o("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.rules,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"商品编码:",prop:"goodsCode"}},[o("span",[e._v(e._s(e.editForm.goodsCode))])]),o("el-form-item",{attrs:{label:"商品名称:",prop:"goodsName"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.goodsName,callback:function(t){e.$set(e.editForm,"goodsName",t)},expression:"editForm.goodsName"}})],1),o("el-form-item",{attrs:{label:"单位:",prop:"unit"}},[o("el-select",{attrs:{clearable:""},model:{value:e.editForm.unit,callback:function(t){e.$set(e.editForm,"unit",t)},expression:"editForm.unit"}},e._l(e.unitEnum,(function(e){return o("el-option",{key:e.code,attrs:{value:e.code,label:e.name}})})),1)],1),o("el-form-item",{attrs:{label:"单价:",prop:"price"}},[o("el-input-number",{attrs:{precision:2,step:.1,min:0,max:99999},model:{value:e.editForm.price,callback:function(t){e.$set(e.editForm,"price",t)},expression:"editForm.price"}})],1),o("el-form-item",{attrs:{label:"会员价:",prop:"disPrice"}},[o("el-input-number",{attrs:{precision:2,step:.1,min:0,max:99999},model:{value:e.editForm.disPrice,callback:function(t){e.$set(e.editForm,"disPrice",t)},expression:"editForm.disPrice"}})],1),o("el-form-item",{attrs:{label:"排序号:",prop:"sortnum"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.sortnum,callback:function(t){e.$set(e.editForm,"sortnum",e._n(t))},expression:"editForm.sortnum"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:function(t){return e.cancelModal("editForm")}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.fEditsubmit("editForm")}}},[e._v("确 定")])],1)],1)],1)},i=[],s=(o("4160"),o("159b"),{name:"GoodsList",data:function(){var e=function(e,t,o){/^[1-9]\d*$/.test(t)?o():o("请输入正确的显示顺序！")};return{goodsList:[],pageNum:1,pageSize:20,total:null,addVisible:!1,editVisible:!1,editForm:{},selectRow:[],searchObj:{goodsCode:null,goodsName:null},unitEnum:this.$store.state.unitEnum,ruleForm:{goodsCode:null,goodsName:null,unit:"份",price:null,disPrice:null,sortnum:null},rules:{goodsCode:[{required:!0,message:"请输入商品编码",trigger:"blur"}],goodsName:[{required:!0,message:"请输入商品名称",trigger:"blur"}],unit:[{required:!0,message:"请选择单位",trigger:"blur"}],price:[{required:!0,message:"请填写单价",trigger:"blur"}],disPrice:[{required:!0,message:"请填写会员价",trigger:"blur"}],sortnum:[{required:!0,message:"请输入显示顺序",trigger:"blur"},{validator:e,trigger:["blur","change"]}]}}},mounted:function(){this.fGetGoodsList()},watch:{allSelect:function(e){var t=this;this.selectRow=[],e.length>0&&e.forEach((function(e){t.selectRow.push(e.id)}))}},methods:{handleSizeChange:function(e){var t=this;t.pageSize=e,t.fGetGoodsList()},handleCurrentChange:function(e){var t=this;t.pageNum=e,t.fGetGoodsList()},handleSelectionChange:function(e){this.allSelect=e},fGetGoodsList:function(){var e=this;window.master.fLoadingOpen(),this.axios.post(window.sHost+window.sUrl.shop.queryGoodsList,{pageNum:e.pageNum,pageSize:e.pageSize,goodsCode:window.master.strReplace(e.searchObj.goodsCode),goodsName:window.master.strReplace(e.searchObj.goodsName)}).then((function(t){window.master.fLoadingClose(),t.data.success?(e.goodsList=t.data.obj.list,e.total=t.data.obj.total):window.master.fErrorMes(t.data.msg)})).catch((function(){window.master.fLoadingClose()}))},submitForm:function(e){var t=this;t.$refs[e].validate((function(o){if(!o)return!1;window.master.fLoadingOpen(),t.axios.post(window.sHost+window.sUrl.shop.saveGoods,JSON.parse(JSON.stringify(t.$refs[e].model))).then((function(o){window.master.fLoadingClose(),o.data.success?(window.master.fSuccessMes(o.data.msg),t.addVisible=!1,t.fGetGoodsList(),t.$refs[e].resetFields()):window.master.fErrorMes(o.data.msg)})).catch((function(){window.master.fLoadingClose()}))}))},fEditsubmit:function(e){var t=this;t.$refs[e].validate((function(o){if(!o)return!1;window.master.fLoadingOpen(),t.axios.post(window.sHost+window.sUrl.shop.updateGoods,JSON.parse(JSON.stringify(t.$refs[e].model))).then((function(o){window.master.fLoadingClose(),o.data.success?(window.master.fSuccessMes(o.data.msg),t.editVisible=!1,t.fGetGoodsList(),t.$refs[e].resetFields()):window.master.fErrorMes(o.data.msg)})).catch((function(){window.master.fLoadingClose()}))}))},cancelModal:function(e){this.addVisible=!1,this.editVisible=!1,this.$refs[e].resetFields()},addGoods:function(){this.addVisible=!0},editGoods:function(){var e=this;void 0===e.allSelect||e.allSelect.length<1||e.allSelect.length>1?window.master.fWarningMes(this.$store.state.sOnlySelectOneMes):e.axios.get(window.sHost+window.sUrl.shop.getGoodsById+"?id="+e.allSelect[0].id).then((function(t){e.editForm=t.data.obj,e.editVisible=!0})).catch()},delGoods:function(){var e=this;void 0===e.allSelect||e.allSelect.length<1||e.allSelect.length>1?window.master.fWarningMes(this.$store.state.sOnlySelectOneMes):e.$confirm("确定删除该商品?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0,closeOnPressEscape:!1,closeOnClickModal:!1}).then((function(){window.master.fLoadingOpen(),e.axios.post(window.sHost+window.sUrl.shop.deleteGoods,"id="+e.allSelect[0].id).then((function(t){window.master.fLoadingClose(),t.data.success?(e.fGetGoodsList(),window.master.fSuccessMes(t.data.msg)):window.master.fErrorMes(t.data.msg)})).catch()}),(function(){}))}}}),l=s,a=o("2877"),n=Object(a["a"])(l,r,i,!1,null,null,null);t["default"]=n.exports},e8b5:function(e,t,o){var r=o("c6b6");e.exports=Array.isArray||function(e){return"Array"==r(e)}},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);